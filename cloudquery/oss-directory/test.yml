kind: source
spec:
  name: "oss-directory"
  registry: "grpc"
  path: "localhost:7777"
  version: "v0.0.1"
  tables:
    ["*"]
  backend_options:
    table_name: "test_sync"
    connection: "@@plugins.postgresql.connection"
  destinations:
    - "file"
    - "bigquery"
  spec:
    access_token: blah
---
kind: destination
spec:
  name: file 
  path: cloudquery/file
  registry: cloudquery
  version: "v3.4.16"
  spec:
    path: "test_only/{{TABLE}}/{{UUID}}.{{FORMAT}}"
    format: json
---
kind: destination
spec:
  name: bigquery
  path: cloudquery/bigquery
  registry: cloudquery
  version: "v3.3.13"
  write_mode: "append"
  spec:
    project_id: oso-production
    dataset_id: opensource_observer_staging
---
kind: destination
spec:
  name: postgresql
  path: cloudquery/postgresql
  registry: cloudquery
  version: "v7.3.3"
  write_mode: "overwrite-delete-stale"
  migrate_mode: forced
  spec:
    connection_string: "postgresql://postgres:postgres@localhost:5432/postgres?sslmode=disable"